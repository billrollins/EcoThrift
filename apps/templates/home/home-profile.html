{% extends 'layouts/base.html' %}

{% load custom_tags %}

{% block title %} Profile {% endblock title %}

{% block body_class %} g-sidenav-show bg-gray-100 {% endblock %}

{% block content %}
<div class="container-fluid py-4">
  <div class="row">
    <div class="col-12">
      <h3 class="mt-5 text-center">Build Your Profile</h3>
      <h5 class="text-secondary font-weight-normal text-center">This information will let us know more about you.</h5>
    </div>
  </div>

  <!-- Card Card-Body-->
  <div class="card card-body">
    
    <!-- Tab Pills -->
    <div class="nav-wrapper position-relative end-0">
      <ul class="nav nav-pills nav-fill p-1" role="tablist">
        {% for nm, form in forms %}
        <li class="nav-item">
          <a class="nav-link {% if forloop.first %}active{% endif %}" data-bs-toggle="pill" href="#{{ nm }}" >
            {{ form.model.model_name }} Profile
          </a>
        </li>
        {% endfor %}
      </ul>
    </div>

    <div class="row">
      <div class="col-12">

        <!-- Tab Forms -->        
        <div class="tab-content">
          {% for nm, form in forms %}
            <div class = "tab-pane fade {% if forloop.first %}active show{% endif %}" id = "{{ nm }}">
              <form action="" method="POST" enctype="multipart/form-data">
                {% csrf_token %}
                {% for formrow in form.form_struct %}
                  <div class="row mt-3">
                    {% if formrow.0.0 is not None %}
                      <h7 class="font-weight-bolder mt-3">{{ formrow.0.0 }}</h7>
                    {% endif %}
                    {% for section, field, label, colsize in formrow %}
                      <div class="col-{{ colsize }}">
                        <label>{{ label }}</label>
                        {{ form|dict_get:field }}
                      </div>
                    {% endfor %}
                  </div>
                {% endfor %}
                
                <div class="button-row d-flex mt-4">
                  <button class="btn bg-gradient-dark ms-auto mb-0" type="submit" name="button" value="{{ nm }}">
                    Update {{ form.model.model_name }}
                  </button>
                </div>
              </form>
            </div>
          {% endfor %}
        </div>
          

        </form>

      </div>
    </div>

  </div>

</div>
{% endblock content %}

<!-- Specific JS goes HERE -->
{% block javascripts %}


{% endblock javascripts %}