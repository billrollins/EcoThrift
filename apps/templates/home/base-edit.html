{% extends 'layouts/base.html' %}

{% load custom_tags %}

{% block title %} New {{ model.model_name }} {% endblock title %}

{% block body_class %} g-sidenav-show bg-gray-100 {% endblock %}

{% block content %}

<div class="container py-4">
  <!-- Card -->
  <div class="card card-body">
    <div class="row">
      <div class="col-12">

        <!-- Card Basic Info -->
        <form action="" method="POST" enctype="multipart/form-data">
          {% csrf_token %}
          
          <!-- formhead -->
          {% block formhead %}
            <h5 class="font-weight-bolder mb-0">{{ form.model.model_name }}</h5>
            {% if detail == 'new' %}
              <p class="mb-0 text-sm">Fill out the form below to create a new {{ form.model.model_name }}</p>
            {% else %}
              <p class="mb-0 text-sm">Editting {{ form.instance }}</p>
            {% endif %}
          {% endblock formhead %}

          <!-- formcontent -->
          {% block formcontent %}
            {% for formrow in form.form_struct %}
              <div class="row mt-3">
                {% if formrow.0.0 is not None %}
                  <h7 class="font-weight-bolder mt-3">{{ formrow.0.0 }}</h7>
                {% endif %}
                {% for section, field, label, colsize in formrow %}
                  <div class="col-{{ colsize }}">
                    <label>{{ label }}</label>
                    {{ form|dict_get:field }}
                  </div>
                {% endfor %}
              </div>
            {% endfor %}
          {% endblock formcontent %}

          <div class="button-row d-flex mt-4">
            <button class="btn bg-gradient-dark ms-auto mb-0" type="submit" >
              {% if detail == 'new' %}Create{% else %}Update{% endif %}
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>
{% endblock content %}

<!-- Specific JS goes HERE --> 
{% block javascripts %} 

  <script src="/static/assets/js/plugins/multistep-form.js"></script>

{% endblock javascripts %}
